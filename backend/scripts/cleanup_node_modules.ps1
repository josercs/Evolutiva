<#!
.SYNOPSIS
  Remove node_modules acidental dentro de backend/src (deve ficar apenas no frontend).
.DESCRIPTION
  Pasta node_modules dentro de backend aumenta drasticamente o contexto Docker e invalida cache.
.PARAMETER Force
  Executa sem prompt de confirmação.
#>
[CmdletBinding()] param(
  [switch]$Force
)

$target = Join-Path (Join-Path $PSScriptRoot '..') 'src/node_modules'
if (-not (Test-Path $target)) { Write-Host 'Nenhum backend/src/node_modules encontrado.' -ForegroundColor Yellow; exit 0 }
if (-not $Force) {
  $ans = Read-Host "Remover pasta $target ? (y/N)"
  if ($ans -notin @('y','Y','s','S')) { Write-Host 'Abortado.'; exit 1 }
}
Write-Host 'Removendo node_modules...' -ForegroundColor Cyan
Remove-Item -Recurse -Force $target
Write-Host 'OK. Rebuild recomendado: docker compose build api' -ForegroundColor Green